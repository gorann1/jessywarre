<%= render 'partials/palete' %>
<div class="flex min-h-auto bg-white">
  <div class="md:w-1/2 max-w-lg mx-auto my-2 px-4 py-3 shadow-none">
    <h1 class="text-4xl font-bold mt-4"><%= @location.name  %></h1>
    <!-- country region island -->
    <div class="flex mt-8 font-light text-gray-500">
      <div class="pr-4">
        <span class="uppercase">Zona</span>
        <p class="text-md text-gray-900 font-semibold pt-2"><%= @location.zone.name %></p>
      </div>
      <div class="pr-4">
        <span class="uppercase">Zemlja</span>
        <p class="text-md text-gray-900 font-semibold pt-2 capitalize;"><%= @location.country.name %></p>
      </div>
      <div class="pr-4">
        <span class="uppercase">Regija</span>
        <p class="text-gray-900 font-semibold pt-2"><%= @location.region.name %></p>
      </div>
      <div class="pr-4">
        <span class="uppercase">Tip</span>
        <p class="text-md text-gray-900 font-semibold pt-2"><%= @location.type.name %></p>
      </div>
      <div class="pr-4">
        <span class="uppercase">Kategorija</span>
        <p class="text-md text-gray-900 font-semibold pt-2"><%= @location.category.name %></p>
      </div>
    </div>
    <%= image_tag @location.main_image, class: "h-72 w-full rounded-lg shadow-md bg-cover mt-8 bg-center object-cover" %>
    <div class="description w-full mt-8 text-gray-500 text-md">
      <%= simple_format (@location.desc) %></div>
    <!--    <h3>Dojmovi <%#= @location.average_rating %>(<%#=@reviews.count %>)</h3>
    <div class="flex">
      <%#= render 'reviews/form' %>

    </div>
    <div class="flex">
      <%#= render 'reviews/list' %>
    </div>-->
    <!--
    <%# if @location.photos.attached? %>
      <%# @location.photos.each do |ph| %>
        <%#= f.hidden_field :photos, multiple: true, value: ph.signed_id %>
      <%# end %>
    <%# end %>
-->



    <%#= image_tag url_for(location), :class => "locations" %>
    <%#= image_tag @location.new_images, class: "h-72 w-full rounded-lg shadow-md bg-cover mt-8 bg-center" %>
<!--    <div data-controller="lightbox" class="images" data-lightbox-options-value='{"controls": true, "loop":true}'>
      <%# (0...@location.images.count).each do |im| %>
        <%#=


      <!-- and within the gallery we want to render our <image> collection/record/whatever -->
      <!-- let's connect click action <a> to onImageClick method in our controller -->
      <!-- and specify target that we can nicely access in controller -->
      <h3>Lorem ipsum</h3>
<!--      <div data-controller="gallery" class="images">
        <%# (0...@location.images.count).each do |im| %>
          <%#= link_to (@location.images[im]), data: { action: 'gallery#onImageClick', target: 'gallery.picture' } do %>
            <%#= image_tag (@location.images[im]) %>
          <%# end %>
        <%# end %>
      </div>
    </div>-->

    <%= render 'partials/instagram' %>

    <div class="grid mt-4 pt-4 max-w-screen-md gap-10 md:grid-cols-1 sm:mx-auto">
      <div>
        <div class="p-8 bg-gray-900 rounded">
          <div class="mb-4 text-center">
            <p class="text-xl font-medium tracking-wide text-white">
              Već od
            </p>
            <div class="flex items-center justify-center">
              <p class="mr-2 text-5xl font-semibold text-white lg:text-6xl">
                100 kn
              </p>
              <p class="text-lg text-gray-500">/ dan</p>
            </div>
          </div>
          <ul class="mb-8 space-y-2">
            <li class="flex items-center">
              <div class="mr-3">
                <svg class="w-4 h-4 text-teal-accent-400" viewBox="0 0 24 24" stroke-linecap="round" stroke-width="2">
                  <polyline fill="none" stroke="currentColor" points="6,12 10,16 18,8"></polyline>
                  <circle cx="12" cy="12" fill="none" r="11" stroke="currentColor"></circle>
                </svg>
              </div>
              <p class="font-medium text-gray-300"><strong class="font-bold text-green-200"><%= t 'Dubina' %>:</strong> <%=@location.depth %>m</p>
            </li>
            <li class="flex items-center">
              <div class="mr-3">
                <svg class="w-4 h-4 text-teal-accent-400" viewBox="0 0 24 24" stroke-linecap="round" stroke-width="2">
                  <polyline fill="none" stroke="currentColor" points="6,12 10,16 18,8"></polyline>
                  <circle cx="12" cy="12" fill="none" r="11" stroke="currentColor"></circle>
                </svg>
              </div>
              <p class="font-medium text-gray-300"><strong class="font-bold text-green-200"><%= t 'Vidljivost' %>:</strong> <%=@location.visibility %></p>
            </li>
            <li class="flex items-center">
              <div class="mr-3">
                <svg class="w-4 h-4 text-teal-accent-400" viewBox="0 0 24 24" stroke-linecap="round" stroke-width="2">
                  <polyline fill="none" stroke="currentColor" points="6,12 10,16 18,8"></polyline>
                  <circle cx="12" cy="12" fill="none" r="11" stroke="currentColor"></circle>
                </svg>
              </div>
              <p class="font-medium text-gray-300"><strong class="font-bold text-green-200"><%= t 'Struje' %>:</strong> <%=@location.currents %></p>
            </li>
          </ul>
           <%= form_for([@location, @location.reservations.new]) do |f| %>
            <%= f.text_field :start_date %>
            <%= f.text_field :end_date %>
            <%= f.hidden_field :location_id, value: @location.id %>
            <%#= f.hidden_field :price, value: @location.price %>
            <br>
            <%= f.submit "Book Now", class:"inline-flex items-center justify-center w-full h-12 px-6 font-medium tracking-wide text-white transition duration-200 rounded shadow-md bg-purple-400 hover:bg-purple-700 focus:shadow-outline focus:outline-none" %>
               <% end %>
          <div>
            <ul class="flex flex-col divide divide-y pt-6">
              <div class="text-md uppercase font-bold text-gray-300 tracking-wide mb-6"><%= t 'Ronilački centri' %></div>
              <% @location.centers.each do |cc|%>
                <li class="flex flex-row bg-gray-100 rounded-lg shadow-sm mb-4">
                  <div class="select-none cursor-pointer flex flex-1 items-center p-4">
                    <div class="flex flex-col w-10 h-10 justify-center items-center mr-4">
                      <a href="#" class="block relative">
                        <img alt="scubaboker" src=<%=asset_path("scuba_flag.png") %>>
                      </a>
                    </div>
                    <div class="flex-1 pl-1 mr-16">
                      <div class="font-medium font-bold text-green-400 hover:text-red-700 dark:text-white">
                        <%= link_to cc do %>
                          <%= cc.name %>
                        <% end %>
                      </div>
                      <div class="text-gray-500 dark:text-gray-200 text-sm">
                        <%=cc.city %>
                      </div>
                    </div>
                    <div class="text-gray-500 dark:text-gray-200 text-xs">
                      Udaljenost
                    </div>
                  </div>
                </li>
              <% end %>
            </ul>
          </div>
        </div>
        <div class="w-11/12 h-2 mx-auto bg-gray-900 rounded-b opacity-75"></div>
        <div class="w-10/12 h-2 mx-auto bg-gray-900 rounded-b opacity-50"></div>
        <div class="w-9/12 h-2 mx-auto bg-gray-900 rounded-b opacity-25"></div>
      </div>
    </div>
  </div>
  <div id="map" class="md:w-1/2"></div>
  <script type="text/javascript">
      handler = Gmaps.build('Google');
      handler.buildMap({
              provider: {
                  disableDefaultUI: true,
                  auto_zoom: false,
                  zoom: 5
                  // pass in other Google Maps API options here
              },
              internal: {
                  id: 'map',
              }
          },
          function(){
              markers = handler.addMarkers(<%=raw @hash.to_json %>);

              handler.bounds.extendWith(markers);
              handler.fitMapToBounds();
          }
      );
  </script>
  <script type="module">
      import PhotoSwipeLightbox from '/v5/photoswipe/photoswipe-lightbox.esm.js';
      const lightbox = new PhotoSwipeLightbox({
          gallery: '#gallery--zoom-transition',
          children: 'a',
          showHideAnimationType: 'zoom',
          pswpModule: '/v5/photoswipe/photoswipe.esm.js'
      });
      lightbox.init();
  </script>
</div>

